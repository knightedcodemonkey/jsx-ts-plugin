module.exports = [
  {
    name: 'dom-event-descriptors.tsx',
    expectDiagnostics: [],
    source: [
      '/// <reference lib="dom" />',
      "import { jsx } from '@knighted/jsx'",
      '',
      'type WidgetEvent = CustomEvent<{ toggled: boolean }>',
      'const widgetDescriptor = {',
      '  handler: (event: WidgetEvent) => {',
      '    event.detail.toggled',
      '  },',
      '  once: true,',
      '  passive: false as const,',
      '}',
      '',
      'const readyDescriptor = {',
      '  handler: (event: CustomEvent<unknown>) => {',
      '    const detail = event.detail as { ready?: boolean }',
      '    if (detail?.ready) {',
      '      console.log(detail.ready)',
      '    }',
      '  },',
      '  signal: new AbortController().signal,',
      '}',
      '',
      'const refTarget = { current: null as HTMLButtonElement | null }',
      '',
      'export const domBadge = jsx`',
      '  <section',
      '    data-kind="dom"',
      '    className="dom-badge"',
      '    onClickCapture=${(event: MouseEvent) => event.stopPropagation()}',
      '    on:widget-toggle=${widgetDescriptor}',
      '    on:readyCapture=${readyDescriptor}',
      '  >',
      '    <button ref=${refTarget}>',
      '      <span>${"ready"}</span>',
      '    </button>',
      '  </section>',
      '`',
    ].join('\n'),
  },
]
